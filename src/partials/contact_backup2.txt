<section id="contact" class="py-20 bg-gradient-to-br from-gray-50 to-purple-50">
    <div class="container mx-auto px-6 md:px-12 max-w-4xl">
        
        <!-- Header -->
        <div class="text-center mb-12">
            <h2 class="text-4xl font-bold text-gray-900 mb-4">Get Your Free Growth Audit</h2>
            <p class="text-xl text-gray-600">Tell us about your business and we'll show you how to scale üìà</p>
            <div class="flex justify-center items-center space-x-2 mt-4 text-sm text-gray-500">
                <svg class="w-5 h-5 text-green-500" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                </svg>
                <span>No credit card required ‚Ä¢ Response within 24 hours ‚Ä¢ Free consultation worth $500</span>
            </div>
        </div>

        <!-- Multi-Step Form Container -->
        <div class="bg-white p-8 md:p-12 rounded-2xl shadow-2xl">
            
            <!-- Progress Indicator -->
            <div class="mb-8">
                <div class="flex justify-between items-center mb-2">
                    <span class="text-sm font-medium text-gray-700">Step <span id="current-step">1</span> of 3</span>
                    <span class="text-sm text-gray-500">Takes 60 seconds</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2">
                    <div id="progress-bar" class="bg-gradient-to-r from-primary to-secondary h-2 rounded-full transition-all duration-300" style="width: 33.33%"></div>
                </div>
            </div>

            <form id="contactForm" method="POST" action="backend/contact-submit.php" class="space-y-6">
                
                <!-- Step 1: Basic Info -->
                <div class="form-step active" data-step="1">
                    <h3 class="text-2xl font-bold text-gray-900 mb-6">üëã Let's start with the basics</h3>
                    
                    <div class="space-y-4">
                        <div>
                            <label for="name" class="block text-sm font-medium text-gray-700 mb-2">Your Name *</label>
                            <input type="text" 
                                   id="name" 
                                   name="name" 
                                   class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all" 
                                   placeholder="John Smith" 
                                   required>
                            <p class="text-red-500 text-sm mt-1 hidden" id="name-error">Please enter your name</p>
                        </div>

                        <div>
                            <label for="email" class="block text-sm font-medium text-gray-700 mb-2">Email Address *</label>
                            <input type="email" 
                                   id="email" 
                                   name="email" 
                                   class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all" 
                                   placeholder="john@company.com" 
                                   required>
                            <p class="text-red-500 text-sm mt-1 hidden" id="email-error">Please enter a valid email</p>
                        </div>

                        <div>
                            <label for="phone" class="block text-sm font-medium text-gray-700 mb-2">Phone Number *</label>
                            <input type="tel" 
                                   id="phone" 
                                   name="phone" 
                                   class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all" 
                                   placeholder="+1 (555) 000-0000" 
                                   required>
                            <p class="text-gray-500 text-xs mt-1">We'll use WhatsApp if available</p>
                        </div>
                    </div>

                    <button type="button" 
                            onclick="nextStep(1)" 
                            class="w-full mt-6 bg-primary text-white px-8 py-4 rounded-lg font-semibold hover:bg-primary/90 transition-all transform hover:scale-105 shadow-lg">
                        Continue ‚Üí
                    </button>
                </div>

                <!-- Step 2: Business Info -->
                <div class="form-step" data-step="2">
                    <h3 class="text-2xl font-bold text-gray-900 mb-6">üè¢ Tell us about your business</h3>
                    
                    <div class="space-y-4">
                        <div>
                            <label for="company" class="block text-sm font-medium text-gray-700 mb-2">Company Name</label>
                            <input type="text" 
                                   id="company" 
                                   name="company" 
                                   class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all" 
                                   placeholder="Your Company Inc.">
                        </div>

                        <div>
                            <label for="website" class="block text-sm font-medium text-gray-700 mb-2">Website URL</label>
                            <input type="url" 
                                   id="website" 
                                   name="website" 
                                   class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all" 
                                   placeholder="https://yourwebsite.com">
                        </div>

                        <div>
                            <label for="industry" class="block text-sm font-medium text-gray-700 mb-2">Industry *</label>
                            <select id="industry" 
                                    name="industry" 
                                    class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all" 
                                    required>
                                <option value="">Select your industry</option>
                                <option value="ecommerce">E-commerce / Retail</option>
                                <option value="saas">SaaS / Software</option>
                                <option value="services">Professional Services</option>
                                <option value="healthcare">Healthcare</option>
                                <option value="realestate">Real Estate</option>
                                <option value="education">Education / E-learning</option>
                                <option value="finance">Finance / Fintech</option>
                                <option value="hospitality">Hospitality / Travel</option>
                                <option value="manufacturing">Manufacturing</option>
                                <option value="other">Other</option>
                            </select>
                        </div>

                        <div>
                            <label for="monthly_budget" class="block text-sm font-medium text-gray-700 mb-2">Monthly Marketing Budget *</label>
                            <select id="monthly_budget" 
                                    name="monthly_budget" 
                                    class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all" 
                                    required>
                                <option value="">Select budget range</option>
                                <option value="under_5k">Under $5,000 / ‚Çπ4L</option>
                                <option value="5k_10k">$5,000 - $10,000 / ‚Çπ4L - ‚Çπ8L</option>
                                <option value="10k_25k">$10,000 - $25,000 / ‚Çπ8L - ‚Çπ20L</option>
                                <option value="25k_50k">$25,000 - $50,000 / ‚Çπ20L - ‚Çπ40L</option>
                                <option value="over_50k">$50,000+ / ‚Çπ40L+</option>
                            </select>
                        </div>
                    </div>

                    <div class="flex gap-4 mt-6">
                        <button type="button" 
                                onclick="prevStep(2)" 
                                class="w-1/3 bg-gray-200 text-gray-700 px-6 py-4 rounded-lg font-semibold hover:bg-gray-300 transition-all">
                            ‚Üê Back
                        </button>
                        <button type="button" 
                                onclick="nextStep(2)" 
                                class="w-2/3 bg-primary text-white px-8 py-4 rounded-lg font-semibold hover:bg-primary/90 transition-all transform hover:scale-105 shadow-lg">
                            Continue ‚Üí
                        </button>
                    </div>
                </div>

                <!-- Step 3: Service Selection & Message -->
                <div class="form-step" data-step="3">
                    <h3 class="text-2xl font-bold text-gray-900 mb-6">üéØ What services are you interested in?</h3>
                    
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-3">Select Services (choose all that apply) *</label>
                            <div class="space-y-2">
                                <label class="flex items-center p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:border-primary hover:bg-primary/5 transition-all">
                                    <input type="checkbox" name="services[]" value="Facebook Ads" class="w-5 h-5 text-primary">
                                    <span class="ml-3 flex-1">
                                        <span class="font-medium">Facebook & Instagram Ads</span>
                                        <span class="text-sm text-gray-500 block">Scale your reach and conversions</span>
                                    </span>
                                </label>
                                <label class="flex items-center p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:border-primary hover:bg-primary/5 transition-all">
                                    <input type="checkbox" name="services[]" value="Google Ads" class="w-5 h-5 text-primary">
                                    <span class="ml-3 flex-1">
                                        <span class="font-medium">Google Ads & PPC</span>
                                        <span class="text-sm text-gray-500 block">Capture high-intent buyers</span>
                                    </span>
                                </label>
                                <label class="flex items-center p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:border-primary hover:bg-primary/5 transition-all">
                                    <input type="checkbox" name="services[]" value="AI Automation" class="w-5 h-5 text-primary">
                                    <span class="ml-3 flex-1">
                                        <span class="font-medium">AI Automation & Workflows</span>
                                        <span class="text-sm text-gray-500 block">Save 20+ hours per week</span>
                                    </span>
                                </label>
                                <label class="flex items-center p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:border-primary hover:bg-primary/5 transition-all">
                                    <input type="checkbox" name="services[]" value="AI Chatbots" class="w-5 h-5 text-primary">
                                    <span class="ml-3 flex-1">
                                        <span class="font-medium">AI Chatbots & Voice Agents</span>
                                        <span class="text-sm text-gray-500 block">24/7 customer support</span>
                                    </span>
                                </label>
                                <label class="flex items-center p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:border-primary hover:bg-primary/5 transition-all">
                                    <input type="checkbox" name="services[]" value="Full Package" class="w-5 h-5 text-primary">
                                    <span class="ml-3 flex-1">
                                        <span class="font-medium">Full Growth Package</span>
                                        <span class="text-sm text-gray-500 block">Ads + Automation + Strategy</span>
                                    </span>
                                </label>
                            </div>
                        </div>

                        <div>
                            <label for="message" class="block text-sm font-medium text-gray-700 mb-2">Tell us about your goals</label>
                            <textarea id="message" 
                                      name="message" 
                                      rows="4" 
                                      class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all" 
                                      placeholder="What challenges are you facing? What are your growth goals? Any specific questions?"></textarea>
                        </div>

                        <div>
                            <label for="hear_about" class="block text-sm font-medium text-gray-700 mb-2">How did you hear about us?</label>
                            <select id="hear_about" name="hear_about" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all">
                                <option value="">Select an option</option>
                                <option value="google">Google Search</option>
                                <option value="facebook">Facebook / Instagram</option>
                                <option value="linkedin">LinkedIn</option>
                                <option value="referral">Referral from friend</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                    </div>

                    <div class="flex gap-4 mt-6">
                        <button type="button" 
                                onclick="prevStep(3)" 
                                class="w-1/3 bg-gray-200 text-gray-700 px-6 py-4 rounded-lg font-semibold hover:bg-gray-300 transition-all">
                            ‚Üê Back
                        </button>
                        <button type="submit" 
                                id="submit-btn"
                                class="w-2/3 bg-gradient-to-r from-primary to-secondary text-white px-8 py-4 rounded-lg font-semibold hover:opacity-90 transition-all transform hover:scale-105 shadow-lg">
                            üöÄ Get My Free Audit
                        </button>
                    </div>
                </div>

            </form>

            <!-- Success/Error Message -->
            <div id="form-status" class="mt-6 p-4 rounded-lg text-center font-semibold hidden"></div>

            <!-- Trust Indicators -->
            <div class="mt-8 pt-8 border-t border-gray-200">
                <div class="grid grid-cols-3 gap-4 text-center text-sm text-gray-600">
                    <div>
                        <svg class="w-8 h-8 mx-auto mb-2 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
                        </svg>
                        <span>Your data is secure</span>
                    </div>
                    <div>
                        <svg class="w-8 h-8 mx-auto mb-2 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        <span>24h response time</span>
                    </div>
                    <div>
                        <svg class="w-8 h-8 mx-auto mb-2 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        <span>No spam, promise</span>
                    </div>
                </div>
            </div>
        </div>

    </div>
</section>

<!-- Multi-Step Form JavaScript -->
<script>
let currentFormStep = 1;
const totalSteps = 3;

function updateProgressBar() {
    const progress = (currentFormStep / totalSteps) * 100;
    document.getElementById('progress-bar').style.width = progress + '%';
    document.getElementById('current-step').textContent = currentFormStep;
}

function showStep(stepNumber) {
    // Hide all steps
    document.querySelectorAll('.form-step').forEach(step => {
        step.classList.remove('active');
        step.style.display = 'none';
    });
    
    // Show current step
    const activeStep = document.querySelector(`.form-step[data-step="${stepNumber}"]`);
    if (activeStep) {
        activeStep.style.display = 'block';
        setTimeout(() => activeStep.classList.add('active'), 10);
    }
    
    currentFormStep = stepNumber;
    updateProgressBar();
    
    // Scroll to top of form
    document.getElementById('contact').scrollIntoView({ behavior: 'smooth', block: 'start' });
}

function validateStep(stepNumber) {
    let isValid = true;
    const step = document.querySelector(`.form-step[data-step="${stepNumber}"]`);
    
    if (stepNumber === 1) {
        // Validate name
        const name = document.getElementById('name');
        const nameError = document.getElementById('name-error');
        if (!name.value.trim()) {
            nameError.classList.remove('hidden');
            name.classList.add('border-red-500');
            isValid = false;
        } else {
            nameError.classList.add('hidden');
            name.classList.remove('border-red-500');
        }
        
        // Validate email
        const email = document.getElementById('email');
        const emailError = document.getElementById('email-error');
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email.value)) {
            emailError.classList.remove('hidden');
            email.classList.add('border-red-500');
            isValid = false;
        } else {
            emailError.classList.add('hidden');
            email.classList.remove('border-red-500');
        }
        
        // Validate phone
        const phone = document.getElementById('phone');
        if (!phone.value.trim()) {
            phone.classList.add('border-red-500');
            isValid = false;
        } else {
            phone.classList.remove('border-red-500');
        }
    }
    
    if (stepNumber === 2) {
        // Validate industry
        const industry = document.getElementById('industry');
        if (!industry.value) {
            industry.classList.add('border-red-500');
            isValid = false;
        } else {
            industry.classList.remove('border-red-500');
        }
        
        // Validate budget
        const budget = document.getElementById('monthly_budget');
        if (!budget.value) {
            budget.classList.add('border-red-500');
            isValid = false;
        } else {
            budget.classList.remove('border-red-500');
        }
    }
    
    return isValid;
}

function nextStep(currentStep) {
    if (validateStep(currentStep)) {
        showStep(currentStep + 1);
        
        // Track in analytics
        if (typeof gtag !== 'undefined') {
            gtag('event', 'form_step_completed', {
                'event_category': 'Contact Form',
                'event_label': `Step ${currentStep}`
            });
        }
    } else {
        // Show validation message
        alert('Please fill in all required fields correctly.');
    }
}

function prevStep(currentStep) {
    showStep(currentStep - 1);
}

// Initialize form
document.addEventListener('DOMContentLoaded', function() {
    showStep(1);
    
    // Enhanced form submission
    document.getElementById('contactForm').addEventListener('submit', function(e) {
        e.preventDefault();
        
        // Check if at least one service is selected
        const servicesChecked = document.querySelectorAll('input[name="services[]"]:checked');
        if (servicesChecked.length === 0) {
            alert('Please select at least one service you\'re interested in.');
            return;
        }
        
        const form = this;
        const submitBtn = document.getElementById('submit-btn');
        const statusElement = document.getElementById('form-status');
        const originalText = submitBtn.innerHTML;
        
        // Show loading state
        submitBtn.innerHTML = '‚è≥ Sending...';
        submitBtn.disabled = true;
        submitBtn.classList.add('opacity-70', 'cursor-not-allowed');
        
        // Track submission attempt
        if (typeof gtag !== 'undefined') {
            gtag('event', 'form_submit', {
                'event_category': 'Contact Form',
                'event_label': 'Full Form Submission'
            });
        }
        
        // Submit form
        fetch(form.action, {
            method: 'POST',
            body: new FormData(form)
        })
        .then(response => response.text())
        .then(data => {
            // Success
            statusElement.className = 'mt-6 p-6 rounded-lg text-center font-semibold bg-green-100 text-green-800 animate-fade-in';
            statusElement.innerHTML = `
                <svg class="w-16 h-16 mx-auto mb-4 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                <p class="text-2xl mb-2">üéâ Thank You!</p>
                <p class="text-lg">Your audit request has been received!</p>
                <p class="text-sm text-green-700 mt-2">We'll contact you within 24 hours to schedule your free consultation.</p>
                <p class="text-sm text-green-600 mt-4">Check your email for confirmation and next steps.</p>
            `;
            statusElement.classList.remove('hidden');
            
            // Hide form
            form.style.display = 'none';
            
            // Track success
            if (typeof gtag !== 'undefined') {
                gtag('event', 'conversion', {
                    'send_to': 'AW-XXXXXXXX/XXXXXXXX',
                    'event_category': 'Contact Form',
                    'event_label': 'Form Submission Success'
                });
            }
            
            // Optional: Redirect after 3 seconds
            // setTimeout(() => {
            //     window.location.href = '/thank-you.html';
            // }, 3000);
        })
        .catch(error => {
            // Error
            statusElement.className = 'mt-6 p-6 rounded-lg text-center font-semibold bg-red-100 text-red-800';
            statusElement.innerHTML = `
                <p class="text-xl mb-2">‚ö†Ô∏è Oops!</p>
                <p>There was an error submitting your form.</p>
                <p class="text-sm mt-2">Please try again or contact us via WhatsApp: +91 8429889303</p>
            `;
            statusElement.classList.remove('hidden');
            
            // Restore button
            submitBtn.innerHTML = originalText;
            submitBtn.disabled = false;
            submitBtn.classList.remove('opacity-70', 'cursor-not-allowed');
        });
    });
});
</script>

<!-- CSS for multi-step form -->
<style>
.form-step {
    display: none;
    opacity: 0;
    animation: fadeIn 0.5s ease-in;
}

.form-step.active {
    display: block;
    opacity: 1;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

/* Custom checkbox styling */
input[type="checkbox"] {
    accent-color: #7C3AED;
    border-radius: 4px;
}

/* Focus styles for accessibility */
input:focus, select:focus, textarea:focus {
    outline: none;
}
</style>